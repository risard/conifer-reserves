<?xml version='1.0'?>

<!-- 
Example opensrf config file for OpenILS
See opensrf.xml.example for core config documentation 
For non-core config info, see the inline documentation within this file
-->

<opensrf version='0.0.1'>


	<default>
	
		<dirs>
			<log>/openils/var/log</log>
			<sock>/openils/var/sock</sock>
			<pid>/openils/var/pid</pid>

			<!-- xsl stylesheets go here -->
			<xsl>/openils/var/xsl</xsl>
			<conf>/openils/var/conf</conf>
			<script>/openils/var/data</script>
			<script_lib>/openils/var/data</script_lib>
		</dirs>

		<server_type>prefork</server_type>

		<!-- script for exception strings -->
		<ils_events>/openils/var/data/ils_events.xml</ils_events>


      <!-- Points to the IDL, which defines the ILS objects -->
		<IDL>/openils/conf/fm_IDL.xml</IDL>


      <!-- defines the settings for the hold notification emails -->
      <email_notify>
         <template>/openils/var/data/hold_notification_template.example</template>
         <smtp_server>my.smtp.server</smtp_server>
         <sender_address>evergreen@mydomain</sender_address>
      </email_notify>


      <!-- defines which services are published via the xml-rpc gateway 
         !!! do NOT publish sentitive interfaces (e.g. storage)
         Only interfaces that require authentication/authorization should be published !!!
      -->
		<xml-rpc>
			<allowed_services>
				<service>opensrf.math</service>
				<service>opensrf.dbmath</service>
				<service>open-ils.cat</service>
				<service>open-ils.search</service>
				<service>open-ils.circ</service>
				<service>open-ils.actor</service>
				<service>open-ils.auth</service>
				<service>open-ils.collections</service>
			</allowed_services>
		</xml-rpc>


      <!-- defines the settings for communicating with an added content vendor -->
		<added_content>
			<module>OpenILS::WWW::AddedContent::MyVendor</module> <!-- perl handler -->
			<userid>testuser</userid> <!-- vendor login -->
			<base_url>http://myvenddor.com</base_url> <!-- vendor url -->

         <!-- add more options as necessary to accomodate the handler module... -->
		</added_content>


      <z3950>
			<default>oclc</default>
         <services>
            <oclc> <!-- service name -->

					<!-- connection info -->
               <host>zcat.oclc.org</host>
               <port>210</port>
               <db>OLUCWorldCat</db>

					<!-- search attributes -->
               <attrs>
                  <tcn>
							<code>12</code> <!-- attribute code -->
							<format>6</format> <!-- search term format (word, date, etc.) -->
						</tcn>
                  <isbn>
							<code>7</code>
							<format>6</format>
						</isbn>
						<lccn>
							<code>9</code>
							<format>3</format>
						</lccn>
                  <author>
							<code>1003</code>
							<format>6</format>
						</author>
                  <title>
							<code>4</code>
							<format>6</format>
						</title>
                  <issn>
							<code>8</code>
							<format>1</format>
						</issn>
                  <publisher>
							<code>1018</code>
							<format>6</format>
						</publisher>
                  <pubdate>
							<code>31</code>
							<format>5</format>
						</pubdate>
						<item_type>
							<code>1001</code>
							<format>1</format>
						</item_type>
						<!--music/publisher numbers?? -->
               </attrs>
            </oclc>

            <loc>
               <name>loc</name>
               <host>z3950.loc.gov</host>
               <port>7090</port>
               <db>Voyager</db>
               <attrs>
                  <isbn>
							<code>7</code>
							<format>1</format>
						</isbn>
               </attrs>
            </loc>
         </services>
      </z3950>


		<activeapps/> 

		<cache>
			<global>
				<servers>
					<server>127.0.0.1:10101</server>
				</servers>
				<max_cache_time>86400</max_cache_time>
			</global>
		</cache>

		<apps>

			<opensrf.persist>
				<keepalive>1</keepalive>
				<stateless>1</stateless>
				<language>perl</language>
				<implementation>OpenSRF::Application::Persist</implementation>
				<max_requests>97</max_requests>
				<unix_config>
					<unix_sock>opensrf.persist_unix.sock</unix_sock>
					<unix_pid>opensrf.persist_unix.pid</unix_pid>
					<max_requests>1000</max_requests>
					<unix_log>opensrf.persist_unix.log</unix_log>
					<min_children>5</min_children>
					<max_children>25</max_children>
					<min_spare_children>2</min_spare_children>
					<max_spare_children>5</max_spare_children>
				</unix_config>

				<app_settings>
					<dbfile>/openils/var/db/persist.db</dbfile>
				</app_settings>

			</opensrf.persist>

			<!-- Authentication server -->
			<open-ils.auth>
				<keepalive>5</keepalive>
				<stateless>1</stateless>
				<language>C</language>
				<implementation>oils_auth.so</implementation>
				<max_requests>93</max_requests>

				<unix_config>
					<unix_sock>open-ils.auth_unix.sock</unix_sock>
					<unix_pid>open-ils.auth_unix.pid</unix_pid>
					<max_requests>1000</max_requests>
					<unix_log>open-ils.auth_unix.log</unix_log>
					<min_children>5</min_children>
					<max_children>35</max_children>
					<min_spare_children>2</min_spare_children>
					<max_spare_children>5</max_spare_children>
				</unix_config>

				<app_settings>
					<!-- if true, user sessions will be persisted via the OpenSRF persist 
							server in addition to memcache -->
					<persist_users>0</persist_users>

					<!-- default session timeouts by login type -->
					<default_timeout>
						<opac>300</opac>
						<staff>28800</staff>
					   <temp>300</temp> <!-- temporary login -->
					</default_timeout>

				</app_settings>

			</open-ils.auth>


			<!-- Generic search server -->
			<open-ils.search>
				<keepalive>5</keepalive>
				<stateless>1</stateless>
				<language>perl</language>
				<implementation>OpenILS::Application::Search</implementation>
				<max_requests>93</max_requests>

				<unix_config>
					<unix_sock>open-ils.search_unix.sock</unix_sock>
					<unix_pid>open-ils.search_unix.pid</unix_pid>
					<max_requests>1000</max_requests>
					<unix_log>open-ils.search_unix.log</unix_log>
					<min_children>5</min_children>
					<max_children>35</max_children>
					<min_spare_children>2</min_spare_children>
					<max_spare_children>5</max_spare_children>
				</unix_config>

				<app_settings>
					<max_cache_time>3600</max_cache_time>
					<marc_html_xsl>oilsMARC21slim2HTML.xsl</marc_html_xsl>
					<zips_file>/openils/var/data/zips.txt</zips_file>
					<spelling_dictionary>/openils/var/data/oils_authority.dict</spelling_dictionary>
					<cache_timeout>600</cache_timeout>
				</app_settings>

			</open-ils.search>


			<!-- server for accessing user info -->
			<open-ils.actor>
				<keepalive>5</keepalive>
				<stateless>1</stateless>
				<language>perl</language>
				<implementation>OpenILS::Application::Actor</implementation>
				<max_requests>93</max_requests>

				<unix_config>
					<unix_sock>open-ils.actor_unix.sock</unix_sock>
					<unix_pid>open-ils.actor_unix.pid</unix_pid>
					<max_requests>1000</max_requests>
					<unix_log>open-ils.actor_unix.log</unix_log>
					<min_children>5</min_children>
					<max_children>35</max_children>
					<min_spare_children>2</min_spare_children>
					<max_spare_children>5</max_spare_children>
				</unix_config>

			</open-ils.actor>



			<!-- server for editing title, etc... -->
			<open-ils.cat>
				<keepalive>5</keepalive>
				<stateless>1</stateless>
				<language>perl</language>
				<implementation>OpenILS::Application::Cat</implementation>
				<max_requests>199</max_requests>

				<unix_config>
					<unix_sock>open-ils.cat_unix.sock</unix_sock>
					<unix_pid>open-ils.cat_unix.pid</unix_pid>
					<max_requests>1000</max_requests>
					<unix_log>open-ils.cat_unix.log</unix_log>
					<min_children>5</min_children>
					<max_children>25</max_children>
					<min_spare_children>2</min_spare_children>
					<max_spare_children>5</max_spare_children>
				</unix_config>

				<app_settings>
					<marctemplates>
						<book>/path/to/templates/marc/book.xml</book>
					</marctemplates>
				</app_settings>


			</open-ils.cat>


			<opensrf.math>
				<keepalive>3</keepalive>
				<stateless>1</stateless>
				<language>C</language>
				<implementation>osrf_math.so</implementation>
				<max_requests>97</max_requests>
				<unix_config>
					<unix_sock>opensrf.math_unix.sock</unix_sock>
					<unix_pid>opensrf.math_unix.pid</unix_pid>
					<max_requests>1000</max_requests>
					<unix_log>opensrf.math_unix.log</unix_log>
					<min_children>5</min_children>
					<max_children>15</max_children>
					<min_spare_children>2</min_spare_children>
					<max_spare_children>5</max_spare_children>
				</unix_config>
			</opensrf.math>
			
			<opensrf.dbmath> 
				<keepalive>3</keepalive>
				<stateless>1</stateless>
				<language>C</language>
				<implementation>osrf_dbmath.so</implementation>
				<max_requests>99</max_requests>
				<unix_config>
					<max_requests>1000</max_requests>
					<unix_log>opensrf.dbmath_unix.log</unix_log>
					<unix_sock>opensrf.dbmath_unix.sock</unix_sock>
					<unix_pid>opensrf.dbmath_unix.pid</unix_pid>
					<min_children>5</min_children>
					<max_children>15</max_children>
					<min_spare_children>2</min_spare_children> <max_spare_children>5</max_spare_children>
				</unix_config>
			</opensrf.dbmath>


			<!-- penalty server -->
			<open-ils.penalty> 
				<keepalive>3</keepalive>
				<stateless>1</stateless>
				<language>perl</language>
				<implementation>OpenILS::Application::Penalty</implementation>
				<max_requests>99</max_requests>
				<unix_config>
					<max_requests>1000</max_requests>
					<unix_log>open-ils.penalty_unix.log</unix_log>
					<unix_sock>open-ils.penalty_unix.sock</unix_sock>
					<unix_pid>open-ils.penalty_unix.pid</unix_pid>
					<min_children>5</min_children>
					<max_children>25</max_children>
					<min_spare_children>2</min_spare_children> 
					<max_spare_children>5</max_spare_children>
				</unix_config>
				<app_settings>
					<patron_penalty>patron_penalty.js</patron_penalty>
               <script_path>/openils/var</script_path>
               <script_path>/openils/var/catalog</script_path>
				</app_settings>
			</open-ils.penalty>



			<!-- Circulation server -->
			<open-ils.circ> 
				<keepalive>3</keepalive>
				<stateless>1</stateless>
				<language>perl</language>
				<implementation>OpenILS::Application::Circ</implementation>
				<max_requests>99</max_requests>
				<unix_config>
					<max_requests>1000</max_requests>
					<unix_log>open-ils.circ_unix.log</unix_log>
					<unix_sock>open-ils.circ_unix.sock</unix_sock>
					<unix_pid>open-ils.circ_unix.pid</unix_pid>
					<min_children>5</min_children>
					<max_children>25</max_children>
					<min_spare_children>2</min_spare_children> <max_spare_children>5</max_spare_children>
				</unix_config>

				<app_settings>

					<notify_hold> <!-- set to "true" to generate hold notification emails -->
						<email>false</email>
					</notify_hold>

               <!-- script script paths and files -->
					<script_path>/openils/var</script_path>
					<script_path>/openils/var/catalog</script_path>
               <scripts>
                  <circ_permit_patron>circ/circ_permit_patron.js</circ_permit_patron>
                  <circ_permit_copy>circ/circ_permit_copy.js</circ_permit_copy>
                  <circ_duration>circ/circ_duration.js</circ_duration>
                  <circ_recurring_fines>circ/circ_recurring_fines.js</circ_recurring_fines>
                  <circ_max_fines>circ/circ_max_fines.js</circ_max_fines>
                  <circ_permit_renew>circ/circ_permit_renew.js</circ_permit_renew>
                  <circ_permit_hold>circ/circ_permit_hold.js</circ_permit_hold>
               </scripts>               

               <!-- list of copy circulation modifiers -->
					<circ_modifiers>
						<mod>art</mod>
						<mod>atlas</mod>
						<mod>audiobook</mod>
						<mod>av</mod>
						<mod>bestseller</mod>
						<mod>bestsellernh</mod>
						<mod>book</mod>
						<mod>cd</mod>
						<mod>dvd</mod>
						<mod>e-book</mod>
						<mod>equipment</mod>
						<mod>filmstrip</mod>
						<mod>kit</mod>
						<mod>magazine</mod>
						<mod>map</mod>
						<mod>microform</mod>
						<mod>music</mod>
						<mod>record</mod>
						<mod>software</mod>
						<mod>talking book</mod>
						<mod>toy</mod>
						<mod>video</mod>
					</circ_modifiers>

              <billing_types>
                  <type>Miscellaneous</type>
                  <type>Overdue materials</type>
                  <type>Fee for placing a hold</type>
                  <type>Fee for checking out a book</type>
                  <type>Fee for library card</type>
                  <type>Miscellaneous charges</type>
                  <type>Lost materials</type>
                  <type>Damaged material</type>
                  <type>Overdue Reserves charge</type>
                  <type>Recall overdue</type>
                  <type>Fee for processing lost library materials</type>
                  <type>Fee for sending patron bills to collection agency</type>
                  <type>Fee for interlibrary loan</type>
                  <type>Fee for copies</type>
                  <type>Money advanced to pay for telephone use</type>
                  <type>Deposit fee</type>
                  <type>Fee for disk</type>
                  <type>Fee for faxing</type>
                  <type>Fee for laminating</type>
                  <type>Fee for room cleaning</type>
                  <type>Deposit returned; fee refund</type>
                  <type>Sale items</type>
                  <type>Fee for lost card</type>
                  <type>Long overdue items</type>
                  <type>Lost/Replacement Cassette</type>
                  <type>Returned Check</type>
               </billing_types>


				</app_settings>

			</open-ils.circ>


         <open-ils.ingest>
            <keepalive>3</keepalive>
            <stateless>1</stateless>

            <implementation>OpenILS::Application::Ingest</implementation>
            <language>perl</language>
            <max_requests>1000000</max_requests>

            <app_settings>
               <script_path>/openils/var/catalog/</script_path>
               <script_path>/openils/var/web/opac/common/js/</script_path>
               <scripts>
                  <biblio_fingerprint>biblio_fingerprint.js</biblio_fingerprint>
                  <biblio_descriptor>biblio_descriptor.js</biblio_descriptor>
               </scripts>
            </app_settings>
            <unix_config>
               <max_requests>1000000</max_requests>
               <unix_log>open-ils.ingest-unix.log</unix_log>
               <unix_sock>open-ils.ingest-unix.sock</unix_sock>
               <unix_pid>open-ils.ingest-unix.pid</unix_pid>
               <min_children>5</min_children>
               <max_children>100</max_children>
               <min_spare_children>2</min_spare_children>
               <max_spare_children>5</max_spare_children>
            </unix_config>
         </open-ils.ingest>


			<!-- Database storage server -->
			<open-ils.storage>
				<keepalive>3</keepalive>
				<stateless>1</stateless>
				<language>perl</language>
				<implementation>OpenILS::Application::Storage</implementation>
				<unix_config>
					<max_requests>1000</max_requests>
					<unix_log>storage_unix.log</unix_log>
					<unix_sock>storage_unix.sock</unix_sock>
					<unix_pid>storage_unix.pid</unix_pid>
					<max_requests>1000</max_requests>
					<min_children>10</min_children>
					<max_children>50</max_children>
					<min_spare_children>2</min_spare_children>
					<max_spare_children>5</max_spare_children>
				</unix_config>
					
				<app_settings>
					<script_path>/openils/var/catalog/</script_path>
					<scripts>
						<biblio_fingerprint>biblio_fingerprint.js</biblio_fingerprint>
					</scripts>
					<databases>
						<driver>Pg</driver>
						<database>
							<type>master</type>
							<weight>2</weight>
							<user>postgres</user>
							<host>127.0.0.1</host>
							<pw>postgres</pw>
							<db>demo-dev</db>
							<client_encoding>SQL_ASCII</client_encoding>
						</database>
					</databases>
				</app_settings>

			</open-ils.storage>


			<open-ils.cstore>
				<keepalive>6</keepalive>
				<stateless>1</stateless>
				<language>C</language>
				<implementation>oils_cstore.so</implementation>
				<max_requests>95</max_requests>

				<unix_config>
					<unix_log>cstore.log</unix_log>
					<unix_sock>cstore.sock</unix_sock>
					<unix_pid>cstore.pid</unix_pid>
					<max_requests>1000</max_requests>
					<min_children>2</min_children>
					<max_children>15</max_children>
					<min_spare_children>2</min_spare_children>
					<max_spare_children>20</max_spare_children>
				</unix_config>
				
				<app_settings>
					<IDL>/openils/conf/fm_IDL.xml</IDL>
					<driver>pgsql</driver>
					<database>
						<type>master</type>
						<weight>2</weight>
						<user>USER</user>
						<host>HOST</host>
						<port>PORT</port>
						<pw>PASSWORD</pw>
						<db>DATABASE_NAME</db>
						<client_encoding>UTF-8</client_encoding>
					</database>
				</app_settings>
			</open-ils.cstore>

			<open-ils.reporter-store>
				<keepalive>5</keepalive>
				<stateless>1</stateless>
				<language>C</language>
				<implementation>oils_rstore.so</implementation>
				<max_requests>95</max_requests>

				<unix_config>
					<unix_log>rstore.log</unix_log>
					<unix_sock>rstore.sock</unix_sock>
					<unix_pid>rstore.pid</unix_pid>
					<max_requests>1000</max_requests>
					<min_children>2</min_children>
					<max_children>15</max_children>
					<min_spare_children>2</min_spare_children>
					<max_spare_children>20</max_spare_children>
				</unix_config>
				
				<app_settings>
					<IDL>/openils/conf/fm_IDL.xml</IDL>
					<driver>pgsql</driver>
					<database>
						<type>master</type>
						<weight>2</weight>
						<user>USER</user>
						<host>HOST</host>
						<port>PORT</port>
						<pw>PASSWORD</pw>
						<db>DATABASE_NAME</db>
						<client_encoding>UTF-8</client_encoding>
					</database>
				</app_settings>
			</open-ils.reporter-store>


			<opensrf.settings>
				<keepalive>1</keepalive>
				<stateless>1</stateless>
				<language>perl</language>
				<implementation>OpenSRF::Application::Settings</implementation>
				<max_requests>17</max_requests>
				<unix_config>
					<unix_sock>opensrf.settings_unix.sock</unix_sock>
					<unix_pid>opoensrf.settings_unix.pid</unix_pid>
					<max_requests>1000</max_requests>
					<unix_log>opensrf.settings_unix.log</unix_log>
					<min_children>5</min_children>
					<max_children>15</max_children>
					<min_spare_children>3</min_spare_children>
					<max_spare_children>5</max_spare_children>
				</unix_config>
			</opensrf.settings>


         <open-ils.collections>
            <keepalive>3</keepalive>
            <stateless>1</stateless>
            <language>perl</language>
            <implementation>OpenILS::Application::Collections</implementation>
            <max_requests>17</max_requests>
            <unix_config>
               <unix_sock>opensrf.collections_unix.sock</unix_sock>
               <unix_pid>opoensrf.collections_unix.pid</unix_pid>
               <max_requests>1000</max_requests>
               <unix_log>opensrf.collections_unix.log</unix_log>
               <min_children>5</min_children>
               <max_children>15</max_children>
               <min_spare_children>3</min_spare_children>
               <max_spare_children>5</max_spare_children>
            </unix_config>
         </open-ils.collections>


         <open-ils.reporter>
            <keepalive>3</keepalive>
            <stateless>1</stateless>
            <language>perl</language>
            <implementation>OpenILS::Application::Reporter</implementation>
            <max_requests>17</max_requests>
            <unix_config>
               <unix_sock>open-ils.reporter_unix.sock</unix_sock>
               <unix_pid>open-ils.reporter_unix.pid</unix_pid>
               <max_requests>1000</max_requests>
               <unix_log>open-ils.reporter_unix.log</unix_log>
               <min_children>5</min_children>
               <max_children>15</max_children>
               <min_spare_children>3</min_spare_children>
               <max_spare_children>5</max_spare_children>
            </unix_config>
         </open-ils.reporter>

		</apps>

	</default>

	<hosts>


		<!-- single host install, everything goes into one host section -->
		<myhost.mydomain.com> <!-- must match 'hostname -f' -->
			<activeapps>

            <!-- opensrf core apps -->
				<appname>opensrf.math</appname> 
				<appname>opensrf.dbmath</appname> 
				<appname>opensrf.settings</appname> 

            <!-- ILS-specific opensrf apps -->
				<appname>open-ils.cat</appname> 
				<appname>open-ils.supercat</appname> 
				<appname>open-ils.search</appname> 
				<appname>open-ils.circ</appname> 
				<appname>open-ils.actor</appname> 
				<appname>open-ils.auth</appname> 
				<appname>open-ils.storage</appname>  
				<appname>open-ils.penalty</appname>  
				<appname>open-ils.collections</appname>  
				<appname>open-ils.cstore</appname>  
				<appname>open-ils.ingest</appname>  
				<appname>open-ils.reporter-store</appname>  
				<appname>open-ils.reporter</appname>  

			</activeapps>
		</myhost.mydomain.com> 

	</hosts>

</opensrf>
