<!--
# Copyright (C) 2008  Georgia Public Library Service
# Bill Erickson <erickson@esilibrary.com>
# This program is free software; you can redistribute it and/or
# modify it under the terms of the GNU General Public License
# as published by the Free Software Foundation; either version 2
# of the License, or (at your option) any later version.
# 
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
-->
<html>
    <head>
        <title>Vandelay</title>
        <style type="text/css">
            @import "/js/dojo/dojo/resources/dojo.css";
            @import "/js/dojo/dijit/themes/tundra/tundra.css";
            @import "/js/dojo/dijit/tests/css/dijitTests.css"; 
            @import "/js/dojo/dojox/grid/_grid/Grid.css";
            td { padding: 6px; }
            .match_div {
                height: 95%;
                width: 95%;
            }
            .match_div a {
                color: red;
                font-weight:bold;
            }
            .match_div a:visited {
                color: red;
                font-weight:bold;
            }
            .tall { height:100%; }
            .hidden { display: none; }
        </style>
        <script type="text/javascript" djConfig="parseOnLoad: true,isDebug:false" src="/js/dojo/dojo/dojo.js"></script>
        <script type="text/javascript" src='vandelay.js'></script>
    </head>
    <body class="tundra" class='tall'>
        <div id="vl-generic-progress" style='width:100%;text-align:center'>
            <div dojoType="dijit.ProgressBar" style="width:200px" indeterminate="true"></div>
        </div>
        <div id="vl-generic-progress-with-total" class='hidden' style='width:100%;text-align:center;'>
            <div dojoType="dijit.ProgressBar" jsId='vlControlledProgressBar' style="width:200px"></div>
        </div>

        <!-- MARC upload form -->
        <div id='vl-marc-upload-div' class='hidden'>
            <h1>Evergreen MARC File Upload</h1><br/>
            <form id="vl-marc-upload-form" enctype="multipart/form-data">
                <input type='hidden' name='ses' id='vl-ses-input'/>
                <br>
                <table>
                    <tr>
                        <td>Queue Name</td>
                        <td>
                            <input type='text' dojoType='dijit.form.TextBox' id='vl-queue-name' size='32'></input>
                        </td>
                    </tr>
                    <tr>
                        <td>Record Type</td>
                        <td>
                            <select id='vl-record-type' dojoType='dijit.form.FilteringSelect'>
                                <option value='bib'>Bibliographic Records</option>
                                <option value='auth'>Authority Records</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>Purpose</td>
                        <td>
                            <select name='purpose' dojoType='dijit.form.FilteringSelect'>
                                <option value='import'>Import</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span id="vl-file-label">File to Upload:</span><br>
                            <span id="vl-file-uploading" class='hidden'>Uploading...</span><br>
                        </td>
                        <td id='vl-input-td'>
                            <input size='48' type="file" name="marc_upload">
                        </td>
                    </tr>
                    <tr>
                        <td colspan='2'>
                            <span id="vl-upload-progress-span" class='hidden'>
                                <div dojoType="dijit.ProgressBar" style="width:200px" indeterminate="true"></div>
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td colspan='2' align='center'>
                            <button dojoType="dijit.form.Button" onclick="batchUpload()">Upload</button>
                        </td>
                    </tr>
                </table>
            </form>
        </div>
        <div id='vl-queue-div' class='tall hidden'>
            <h1>Record Queue</h1><br/>
            <script>
                var vlQueueGridLayout;
                function resetVlQueueGridLayout() {
                    vlQueueGridLayout = [{
                        defaultCell: {styles: 'text-align: center;'},
                        cells : [[
                            {name: 'Selected', get: vlQueueGridDrawSelectBox },
                            {name: 'Import Time', field:'import_time', get:vlGetDateTimeField}
                        ]]
                    }];
                }
            </script>
            <button dojoType='dijit.form.Button' onclick='vlSelectAllGridRecords();'>Select All</button>
            <button dojoType='dijit.form.Button' onclick='vlSelectNoGridRecords();'>Select None</button>
            <button dojoType='dijit.form.Button' onclick='vlImportSelectedRecords();'>Import Selected</button>
            <div class='tall'>
                <div dojoType='dojox.Grid' jsId='vlQueueGrid'> </div>
            </div>
        </div>

        <!-- Grid of record matches -->
        <div id='vl-match-div' class='tall hidden'>
            <script>
                var vlMatchGridLayout;
                function resetVlMatchGridLayout() {
                    vlMatchGridLayout = [{
                        defaultCell: {styles: 'text-align: center;'},
                        cells : [[
                            {name: 'ID', field:'id'},
                            {   name: 'View MARC', 
                                get: vlGetViewMARC, 
                                value:'<a href="javascript:void(0);" onclick="vlLoadMARCHtml(RECID);">View MARC</a>'
                            },
                            {name: 'Creator', get: vlGetCreator},
                            {name: 'Create Date', field:'create_date', get: vlGetDateTimeField},
                            {name: 'Last Edit Date', field:'edit_date', get: vlGetDateTimeField},
                            {name: 'Source', field:'source'},
                            {name: 'TCN Source', field:'tcn_source'},
                            {name: 'TCN Value', field:'tcn_value'}
                        ]]
                    }];
                }
            </script>
            <h1>Import Matches</h1></br>
            <div>
                <button dojoType='dijit.form.Button' onclick='displayGlobalDiv("vl-queue-div");'>Back To Import Queue...</button>
            </div>
            <div class='tall'>
                <div dojoType='dojox.Grid' jsId='vlMatchGrid'> </div>
            </div>
        </div>


        <!-- MARC as HTML for matched records -->
        <div id='vl-match-html-div' class='tall hidden'>
            <h1>MARC Record</h1><br/>
            <div>
                <button dojoType='dijit.form.Button' onclick='displayGlobalDiv("vl-match-div");'>Back To Matches...</button>
            </div>
            <div>
                <style>#vl-match-record-html td {padding:0px;}</style>
                <div id='vl-match-record-html'/>
            </div>
        </div>

    </body>
</html>
