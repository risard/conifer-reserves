[%

	url	= cgi.server_name();
	port	= cgi.server_port();
	target = cgi.param("target");	

	# --------------------------------------------------------------------------------- 
	# All of the css files we might need
	# --------------------------------------------------------------------------------- 
	link(rel="stylesheet", href="/css/opac_main.css", type="text/css");
	link(rel="stylesheet", href="/css/record_result.css", type="text/css");
	link(rel="stylesheet", href="/css/adv_search.css", type="text/css");
	link(rel="stylesheet", href="/css/search_bar.css", type="text/css");

	js( content='
			var static = parent.static_window;
			static.globalPageTarget = "' _ target _ '";

			if(!static.globalPageTarget)
				static.globalPageTarget = "start";

			function pageInit() {
				while(!static.globalInit){alert("hi");}
				alert(static.globalPageTarget);
				static.globalInit();
			}

			
			' 
			
			);

%]

[%#

	# --------------------------------------------------------------------------------- 
	# All the javascript files we migh need
	# --------------------------------------------------------------------------------- 

	INCLUDE opac/pages/chunks/cgi_js_params.ttk;	

	IF ! target; target = "start"; END;

	js( content = '
		var globalPageTarget		= "' _ target _ '"; 
		var globalRootURL			= "' _ url _ '"; 
		var globalPort				= "' _ port _ '"; 
		var globalRootPath		= "/opac/";
	'); 

	# --------------------------------------------------------------------------------- 
	# Utility files
	# --------------------------------------------------------------------------------- 
	js(src="/js/util/fieldmapper.js");
	js(src="/js/util/JSON.js");
	js(src="/js/util/RemoteRequest.js");
	js(src="/js/util/UserSession.js");
	js(src="/js/util/md5.js");
	js(src="/js/util/webutils.js");
	js(src="/js/util/ex.js");

	
	# --------------------------------------------------------------------------------- 
	# Chunks
	# --------------------------------------------------------------------------------- 
	js(src="/js/opac/SearchBarFormChunk.js");
	js(src="/js/opac/SearchBarChunk.js");
	js(src="/js/opac/HTMLChunks.js");


	# --------------------------------------------------------------------------------- 
	# Pages
	# --------------------------------------------------------------------------------- 
	js(src="/js/opac/XULEvents.js");
	js(src="/js/opac/Page.js");

	js(src="/js/opac/AbstractRecordResultPage.js");
	js(src="/js/opac/MRResultPage.js");
	js(src="/js/opac/RecordResultPage.js");

	js(src="/js/opac/LoginPage.js");
	js(src="/js/opac/LogoutPage.js");
	js(src="/js/opac/AboutPage.js");
	js(src="/js/opac/AdvancedSearchPage.js");
	js(src="/js/opac/MyOPACPage.js");
	js(src="/js/opac/OPACStartPage.js");

	js(src="/js/opac/GlobalInit.js");


%]


